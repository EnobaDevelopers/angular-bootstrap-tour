!function(a){"use strict";function b(a,b){var c=a.$$phase;"$apply"===c||"$digest"===c?b&&"function"==typeof b&&b():a.$apply(b)}function c(a,c,d){c.onShow&&(d.onShow=function(){b(a,function(){a.$eval(c.onShow)})}),c.onShown&&(d.onHide=function(){b(a,function(){a.$eval(c.onShown)})}),c.onHide&&(d.onHide=function(){b(a,function(){a.$eval(c.onHide)})}),c.onHidden&&(d.onHiden=function(){b(a,function(){a.$eval(c.onHiden)})}),c.onNext&&(d.onNext=function(){b(a,function(){a.$eval(c.onNext)})}),c.onPrev&&(d.onPrev=function(){b(a,function(){a.$eval(c.onPrev)})}),c.onPause&&(d.onPause=function(){b(a,function(){a.$eval(c.onPause)})}),c.onResume&&(d.onResume=function(){b(a,function(){a.$eval(c.onResume)})})}a.factory("TourTemplateFactory",["$templateCache","$compile",function(a,c){var d={};return d.wrap=function(a,d){return function(){var e=angular.element(a);return b(d,function(){c(e)(d)}),e}},d.get=function(b,c){var e=a.get(b);return e?d.wrap(e,c):null},d}]),a.controller("TourController",["$filter",function(a){function b(b){var c=a("orderBy")(b,"order");return angular.forEach(c,function(a,b){a.next=b+1,a.prev=b-1}),c}function c(){d&&(d._options.steps=[],d.addSteps(b(f)))}var d,e=this,f=[];e.addStep=function(a){~f.indexOf(a)||(f.push(a),c())},e.removeStep=function(a){~f.indexOf(a)&&(f.splice(f.indexOf(a),1),c())},e.getSteps=function(){return f},e.init=function(a){return a.steps=b(f),d=new Tour(a)}}]),a.directive("tour",["TourTemplateFactory",function(a){return{restrict:"EA",scope:!0,controller:"TourController",link:function(d,e,f,g){var h,i={name:f.name||"tour",container:f.container||"body",keyboard:f.keyboard||!0,storage:f.storage?d.$eval(f.storage):window.localStorage,debug:f.debug||!1,redirect:f.redirect||!0,duration:f.duration||!1,basePath:f.basePath||"",placement:f.placement||"right",backdrop:f.backdrop||!1,orphan:f.orphan||!1};c(d,f,i),f.onStart&&(i.onStart=function(){b(d,function(){d.$eval(f.onStart)})}),f.onEnd&&(i.onEnd=function(){b(d,function(){d.$eval(f.onEnd)})}),f.afterGetState&&(i.afterGetState=function(a,c){b(d,function(){d.$eval(f.afterGetState).call(d.tour,a,c)})}),f.afterSetState&&(i.afterSetState=function(a,c){b(d,function(){d.$eval(f.afterSetState).call(d.tour,a,c)})}),f.afterRemoveState&&(i.afterRemoveState=function(a,c){b(d,function(){d.$eval(f.afterRemoveState).call(d.tour,a,c)})}),f.template&&(h=a.wrap(d.$eval(f.template),d)),f.templateUrl&&(h=a.get(f.templateUrl,d)),h&&(i.template=h),d.$watchCollection(g.getSteps,function(a){d.stepCount=a.length}),f.tourOptions&&angular.extend(i,d.$eval(f.tourOptions)),d.tour=g.init(i)}}}]),a.directive("tourStep",["TourTemplateFactory",function(a){return{restrict:"EA",scope:!0,require:"^tour",link:function(b,d,e,f){function g(){return e.skip?b.$eval(e.skip):!1}var h,i={element:d,order:e.order||0};e.path&&(i.path=e.path),e.animation&&(i.animation=e.animation),e.container&&(i.container=e.container),e.placement&&(i.placement=e.placement),e.backdrop&&(i.backdrop=e.backdrop),e.redirect&&(i.redirect=e.redirect),e.orphan&&(i.orphan=e.orphan),e.reflex&&(i.reflex=e.reflex),c(b,e,i),e.$observe("content",function(a){i.content=a}),e.$observe("title",function(a){i.content=a}),e.template&&(h=a.wrap(b.$eval(e.template),b)),e.templateUrl&&(h=a.get(e.templateUrl,b)),h&&(i.template=h),b.$watch(g,function(a){a?f.removeStep(i):f.addStep(i)}),e.options&&angular.extend(i,b.$eval(e.options)),f.addStep(i)}}}])}(angular.module("bm.bsTour",[]));